title: "Selfie Stick System with Remote"
description: "Block Diagram with Pin Mappings and Physical Components"
comment: "Selfie Stick Block Diagram with Rechargeable Battery and Physical Structure"

# Global graph attributes
graph_attributes:
  graph:
    splines: "ortho"
    nodesep: "0.5"
    ranksep: "0.7"
    pad: "0.5"
    bgcolor: "white"
    rankdir: "LR"
    compound: "true"
    style: "filled"
    margin: "0.2"
    newrank: "true"
    ordering: "out"
    ratio: "fill"
    size: "11,8.5"

# Title styling
title_attributes:
  labelloc: "t"
  fontsize: "16"
  fontname: "Arial"

# Define clusters (main groups)
clusters:
  - name: "main"
    attributes:
      label: "Selfie Stick"
      style: "rounded,filled"
      color: "gray"
      fillcolor: "#F8F9F9"
      fontname: "Arial"
      fontsize: "16"
      penwidth: "2.0"
      margin: "20"
    subgraphs:
      - name: "control"
        attributes:
          label: "Phone Mount"
          style: "rounded,filled"
          color: "#3498DB"
          fillcolor: "#EBF5FB"
          fontname: "Arial"
          fontsize: "14"
          margin: "10"
          penwidth: "1.5"
        nodes:
          - id: "phone_stand"
            name: "Phone Stand\nwith Mount"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#3498DB"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
          - id: "phone_clip"
            name: "Phone Clip\nSpring-loaded Mechanism"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#8E44AD"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
          - id: "cold_shoe"
            name: "Cold Shoe Interface\nStandard Camera Mount"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#8E44AD"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
          - id: "pan_tilt"
            name: "Pan-tilt Head\nAdjustable Angle"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#8E44AD"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
      - name: "structure"
        attributes:
          label: "Physical Structure"
          style: "rounded,filled"
          color: "#27AE60"
          fillcolor: "#E8F8F5"
          fontname: "Arial"
          fontsize: "14"
          margin: "10"
          penwidth: "1.5"
        nodes:
          - id: "tension_rod"
            name: "Aluminum Alloy Tension Rod\nTelescopic Extension"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#27AE60"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.2"
          - id: "integrated_legs"
            name: "Integrated Legs\nFoldable Tripod Design"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#27AE60"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
          - id: "feet_pad"
            name: "Feet Pad\nNon-slip Surface"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#27AE60"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "1.8"
          - id: "bridge"
            name: "Bridge\nStructural Support"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#27AE60"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "1.8"

  - name: "remote"
    attributes:
      label: "Remote"
      style: "rounded,filled"
      color: "gray"
      fillcolor: "#F8F9F9"
      fontname: "Arial"
      fontsize: "16"
      penwidth: "2.0"
      margin: "20"
    subgraphs:
      - name: "remote_control"
        attributes:
          label: "Control System"
          style: "rounded,filled"
          color: "#3498DB"
          fillcolor: "#EBF5FB"
          fontname: "Arial"
          fontsize: "14"
          margin: "10"
          penwidth: "1.5"
        nodes:
          - id: "photo_button"
            name: "Photo Button\n(GPIO Input)"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#3498DB"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
          - id: "bt_module"
            name: "BT-W8000-SOP8\nPA3/ADC: Button Input (Pin 4)\nPB5/TMS: UART TX (Pin 3)\nXO16M (Pin 5)\nXI16M (Pin 6)\nVDD33 (Pin 7)\nANT (Pin 8)\nGND (Pin 1)"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#3498DB"
              fontname: "Arial"
              fontsize: "12"
              height: "2.0"
              width: "3.0"
          - id: "crystal_circuit"
            name: "Clock Circuit\n16MHz Crystal (X1)\nC15, C16: 5.6pF"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#3498DB"
              fontname: "Arial"
              fontsize: "12"
              height: "0.8"
              width: "2.0"
          - id: "antenna_circuit"
            name: "Antenna Circuit\nANT-PCB\nR9: 0Ω\nANT2 (Optional)"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#3498DB"
              fontname: "Arial"
              fontsize: "12"
              height: "0.8"
              width: "2.0"
          - id: "decoupling"
            name: "Power Decoupling\nC14: 0.1µF"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "1.5"
          - id: "remote_housing"
            name: "Remote Housing\nErgonomic Design"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#8E44AD"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "2.0"
      - name: "remote_power"
        attributes:
          label: "Power System"
          style: "rounded,filled"
          color: "#E74C3C"
          fillcolor: "#FDEDEC"
          fontname: "Arial"
          fontsize: "14"
          margin: "10"
          penwidth: "1.5"
        nodes:
          - id: "rechargeable_battery"
            name: "LIR1632\n(3.7V Rechargeable)"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "1.5"
          - id: "charging_circuit"
            name: "Battery Charger\nTP4056\nUVLO: 2.4V\nFloat V: 4.2V\nCharge I: 130mA"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "1.2"
              width: "1.8"
          - id: "protection_circuit"
            name: "Protection IC\nDW01A\nOvercharge\nOver-discharge\nShort Circuit"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "1.0"
              width: "1.6"
          - id: "usb_connector"
            name: "USB-C Connector\nCharging port"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "0.6"
              width: "1.8"
          - id: "voltage_regulator"
            name: "Voltage Regulator\nXC6206\n3.3V Output"
            attributes:
              shape: "box"
              style: "filled"
              fillcolor: "white"
              color: "#E74C3C"
              fontname: "Arial"
              fontsize: "12"
              height: "0.8"
              width: "1.6"

# Define connections between nodes
connections:
  # Physical connections in the selfie stick
  - from: "phone_clip"
    to: "phone_stand"
    label: "Mechanical"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#8E44AD"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "cold_shoe"
    to: "phone_stand"
    label: "Mount"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#8E44AD"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "pan_tilt"
    to: "phone_stand"
    label: "Adjustable"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#8E44AD"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "pan_tilt"
    to: "tension_rod"
    label: "Connection"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#27AE60"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "tension_rod"
    to: "bridge"
    label: "Support"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#27AE60"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "bridge"
    to: "integrated_legs"
    label: "Connection"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#27AE60"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "integrated_legs"
    to: "feet_pad"
    label: "Support"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#27AE60"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "bridge"
    to: "remote_housing"
    label: "Mounting"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#8E44AD"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  # Button Input Connection
  - from: "photo_button"
    to: "bt_module"
    label: "PA3/ADC"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#3498DB"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "photo_button"
    to: "remote_housing"
    label: "Physical"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#8E44AD"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  # Power Connections
  - from: "usb_connector"
    to: "charging_circuit"
    label: "5V"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "charging_circuit"
    to: "protection_circuit"
    label: "BATT+"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"
      
  - from: "protection_circuit"
    to: "rechargeable_battery"
    label: "Protected 3.7V"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"
      
  - from: "protection_circuit"
    to: "voltage_regulator"
    label: "3.0-4.2V"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "voltage_regulator"
    to: "decoupling"
    label: "3.3V"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"

  - from: "decoupling"
    to: "bt_module"
    label: "VDD33"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#E74C3C"
      penwidth: "1.5"
      weight: "2"
      labelfloat: "true"
      labeldistance: "2.0"

  # Crystal Connection
  - from: "crystal_circuit"
    to: "bt_module"
    label: "16MHz"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#3498DB"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  # Antenna Connection
  - from: "bt_module"
    to: "antenna_circuit"
    label: "ANT"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      color: "#2980B9"
      penwidth: "1.5"
      weight: "1"
      labelfloat: "true"
      labeldistance: "2.0"

  # Wireless Communication
  - from: "bt_module"
    to: "phone_stand"
    label: "BLE"
    attributes:
      fontsize: "10"
      fontname: "Arial"
      style: "dashed"
      color: "#2980B9"
      penwidth: "1.5"
      weight: "0"
      constraint: "false"
      labelfloat: "true"
      labeldistance: "2.0"

# Output formats
output_formats: ["pdf", "png"]